// Real BMTC Bus Stop Data
// Source: BMTC Real-time Dataset
// Format: stop_name, zone_id, stop_id, stop_lat, stop_lon

export const busStopsData = `(Theneyuru)I Basapura Gate,26089,26089,13.22602,77.83624
10th Cross Lingadhiranahalli,29374,29374,13.00951,77.47431
10th Cross Magadi Road,20558,20558,12.97556,77.55562
10th Cross Magadi Road,20559,20559,12.97574,77.55706
10th Stone NICE Road,29375,29375,12.87273,77.4986
10th Stone NICE Road,35415,35415,12.87242,77.49865
11th Block Anjanapura,29373,29373,12.85225,77.57235
11th Block Anjanapura,35416,35416,12.85224,77.57265
12th Block Nagarabhavi,21629,21629,12.96018,77.51398
12th Block Nagarabhavi,21630,21630,12.96076,77.51351
12th Main 7th Cross BTM Layout,22869,22869,12.91393,77.61007
13th Main 7th Cross BTM Layout,22873,22873,12.914,77.61002
14th Main HSR Layout,20568,20568,12.91637,77.63472
14th Main HSR Layout,20569,20569,12.91619,77.63521
14th Main HSR Layout,29381,29381,12.91972,77.63844
14th Main HSR Layout,35422,35422,12.91966,77.63831
16th Main Hopcoms BTM Layout,22881,22881,12.91971,77.61036
17th Main Hopcoms BTM Layout,22884,22884,12.91953,77.61028
18th Main Jayanagara,22890,22890,12.92328,77.58898
18th Main Jayanagara,23428,23428,12.92343,77.58964
19th Main 13th Cross HSR Layout,22891,22891,12.91593,77.65176
19th Main 13th Cross HSR Layout,24300,24300,12.91582,77.65175
1st Block Rajajinagara,20575,20575,13.0047,77.54909
1st Block Rajajinagara,20576,20576,13.00515,77.54887
1st Block Rajajinagara,39193,39193,13.00592,77.54867
1st Block Vidyaranyapura,21631,21631,13.07024,77.55543
1st Block Vidyaranyapura,21632,21632,13.07023,77.55539
1st Block Vishweshwaraiah Layout,29392,29392,12.93746,77.47873
1st Block Vishweshwaraiah Layout,35600,35600,12.93748,77.47888
1st Cross Magadi Road,20577,20577,12.97569,77.563
1st Cross Magadi Road,20578,20578,12.97569,77.5628
1st Main Kodichikkanahalli,29393,29393,12.89854,77.61543
1st Main Kodichikkanahalli,35599,35599,12.89847,77.6155
1st Stage 3rd Block Nagarabhavi (Nayandahalli),22896,22896,12.95302,77.52026
1st Stage 3rd Block Nagarabhavi (Summanahalli),22897,22897,12.95286,77.52017
1st Stage HBR Layout,29395,29395,13.02116,77.6263
22nd Cross HSR Layout,24297,24297,12.90857,77.65163
2nd Stage  H B R Layout (2nd Cross),29400,29400,13.03172,77.61208
2nd Stage 11th Block Nagarabhavi,35596,35596,12.97754,77.51333
2nd Stage 9th Block Nagarabhavi,35595,35595,12.96864,77.51027
2nd Stage H B R Layout (1st Main),29399,29399,13.02881,77.61556
2nd Stage H B R Layout (1st Main),35594,35594,13.02881,77.61553
2nd Stage HBR Layout (2nd Cross),35593,35593,13.03165,77.61209
2nd Stage Kanteeravanagara,22907,22907,13.01505,77.53901
2nd stage Kuvempunagara,29402,29402,13.07313,77.54132
2nd stage Kuvempunagara,35591,35591,13.07306,77.54142
3rd Block Jayanagara,21446,21446,12.9318,77.58393
3rd Block Jayanagara,21447,21447,12.93349,77.58396
3rd Block Vidyaranyapura,21633,21633,13.0723,77.55641
3rd Block Vidyaranyapura,21634,21634,13.07226,77.55635
3rd Main Road Annapoorneshwarinagara,22684,22684,12.97816,77.50434
3rd Main Road Annapoorneshwarinagara,22688,22688,12.97811,77.50446
3rd Stage Basaveshwaranagara,29404,29404,12.98912,77.54249
3rd Stage Basaveshwaranagara,35589,35589,12.98898,77.54254
4th Block HBR Layout,29406,29406,13.03437,77.63268
4th Block HBR Layout,35587,35587,13.03435,77.63264
4th Phase Yelahanka New Town Iyengar Bakery,29407,29407,13.10426,77.57
4th Stone NICE Road,35586,35586,13.009,77.47509
4th T Block Jayanagara,22918,22918,12.92317,77.59363
4th T Block Jayanagara,24180,24180,12.9229,77.59341
5th Block HBR Layout,29409,29409,13.03585,77.63142
5th Block HBR Layout,35585,35585,13.03582,77.6315
5th Block Jayanagara,22920,22920,12.91727,77.58359
5th Block Jayanagara,22921,22921,12.91727,77.58367
5th Block Vishweshwaraiah Layout,35584,35584,12.95838,77.4816
5th Cross Magadi Road,20584,20584,12.97567,77.56081
5th Cross Magadi Road,20585,20585,12.97578,77.56071
5th Cross Sriramapura,22923,22923,12.99214,77.56647
5th Phase Yelahanka New Town,22925,22925,13.10575,77.57251
5th Stone NICE Road,29412,29412,12.97116,77.47145
6th Block Rajajinagara,20586,20586,12.97944,77.55359
6th Block Rajajinagara,20587,20587,12.97953,77.55377
7th Cross Wilson Garden,22929,22929,12.94699,77.59436
7th Cross Wilson Garden,23661,23661,12.94684,77.59465
80 feet Road Kalyananagara,20588,20588,13.02564,77.6406
80 feet Road Kalyananagara,21450,21450,13.02546,77.64042
80ft Road Banasawadi,29419,29419,13.01538,77.6429
80ft Road Banasawadi,35575,35575,13.01511,77.64267
80ft Road HRBR Layout,29420,29420,13.02095,77.64317
80ft Road HRBR Layout,35574,35574,13.02035,77.64328
80ft Road MS Ramaiah College,22937,22937,13.02752,77.57571
8th Main 3rd Cross  Junction,22108,22108,13.02248,77.63714
8th Main 3rd Cross  Junction,22109,22109,13.02274,77.6373
8th Main Kamalanagara,20591,20591,12.99178,77.53856
8th Main Kamalanagara,20592,20592,12.99163,77.53839
8th Mile Dasarahalli,20593,20593,13.04622,77.50755
8th Mile Dasarahalli,20594,20594,13.04541,77.50795
8th Mile Dasarahalli,35570,35570,13.0451,77.50748
8th Mile Dasarahalli,35571,35571,13.04547,77.50553
8th Mile Dasarahalli,35572,35572,13.04544,77.50547
8th Mile Dasarahalli,38567,38567,13.04571,77.50753
8th Mile Dasarahalli Arrival,39687,39687,13.04556,77.50726
9th Block Jayanagara,37132,37132,12.91964,77.5928
9th Block Jayanagara (22nd Main),22949,22949,12.91969,77.59144
9th Block Jayanagara (40th Cross),22950,22950,12.91969,77.59247
9th Stone NICE Road,29424,29424,12.88789,77.48532
9th block Jayanagara,37131,37131,12.91957,77.59284`;

// Parse CSV data into usable format
export const parseBusStops = () => {
  const lines = busStopsData.trim().split('\n');
  const stops = [];
  const stopMap = new Map(); // To track unique stop names and their coordinates
  
  lines.forEach(line => {
    const parts = line.split(',');
    if (parts.length >= 5) {
      const stopName = parts[0].trim();
      const lat = parseFloat(parts[3]);
      const lon = parseFloat(parts[4]);
      
      // Only add if we don't have this stop name yet (avoid duplicates)
      if (!stopMap.has(stopName) && !isNaN(lat) && !isNaN(lon)) {
        stopMap.set(stopName, { lat, lon });
        stops.push({
          name: stopName,
          stopId: parts[2].trim(),
          lat: lat,
          lng: lon
        });
      }
    }
  });
  
  return stops;
};

// Get all unique stop names for autocomplete
export const getAllStopNames = () => {
  const stops = parseBusStops();
  return stops.map(stop => stop.name).sort();
};

// Get coordinates for a specific stop
export const getStopCoordinates = (stopName) => {
  const stops = parseBusStops();
  const stop = stops.find(s => s.name.toLowerCase() === stopName.toLowerCase());
  return stop ? { lat: stop.lat, lng: stop.lng } : null;
};

// Search stops by partial name
export const searchStops = (query) => {
  if (!query || query.length < 2) return [];
  
  const stops = parseBusStops();
  const lowerQuery = query.toLowerCase();
  
  return stops
    .filter(stop => stop.name.toLowerCase().includes(lowerQuery))
    .slice(0, 10) // Limit to 10 results
    .map(stop => stop.name);
};
